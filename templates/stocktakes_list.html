{% extends "base.html" %}
{% block content %}
  <div class="card rounded-2xl border border-slate-200 bg-white p-4 sm:p-6 shadow-sm">
    <h2 class="text-lg font-semibold text-slate-900">棚卸一覧</h2>

    <div class="actions mt-4 flex flex-wrap items-center gap-2">
      <a class="btn inline-flex items-center justify-center rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400" href="{{ url_for('stocktake_weekly_new') }}">＋ 棚卸入力</a>
    </div>

    <div class="overflow-x-auto -mx-4 sm:mx-0">

      <table class="min-w-[640px] w-full text-sm">
      <thead>
        <tr>
          <th>ID</th>
          <th>日時</th>
          <th>区分</th>
          <th>行数</th>
          <th>メモ</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        {% for st in stocktakes %}
          <tr>
            <td><a href="{{ url_for('stocktake_detail', stocktake_id=st['stocktake_id']) }}">{{ st["stocktake_id"] }}</a></td>
            <td>{{ st["taken_at_display"] or st["taken_at"] }}</td>
            <td>{{ st["scope"] }}</td>
            <td>{{ st["line_count"] }}</td>
            <td>{{ st["note"] or "" }}</td>
            <td class="flex flex-wrap gap-2">
              <a class="button-link" href="{{ url_for('stocktake_edit_form', stocktake_id=st['stocktake_id']) }}">編集</a>
              <form method="post" action="{{ url_for('stocktake_delete', stocktake_id=st['stocktake_id']) }}" onsubmit="return confirm('棚卸を削除します。よろしいですか？');">
                <button type="submit" class="button-link text-red-600">削除</button>
              </form>
            </td>
          </tr>
        {% else %}
          <tr><td colspan="6">まだ棚卸がありません。</td></tr>
        {% endfor %}
      </tbody>
    </table>
    </div>
  </div>
{% endblock %}
